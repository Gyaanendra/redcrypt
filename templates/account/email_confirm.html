{% extends "base.html" %}
{% load i18n %}
{% load account %}
{% load static %}

{% block head_title %}{% trans "Confirm Email" %}{% endblock head_title %}

{% block content %}
<div class="min-h-screen flex items-center justify-center px-4 py-8">
  <div class="w-full max-w-md" data-aos="fade-up" data-aos-duration="800">
    <div class="retro-card p-8">
      <div class="text-center">
        <div class="pixel-accent mb-6"></div>
        <div class="flex justify-center mb-4">
          <span class="ph-fill ph-envelope-open text-4xl text-accent crt-glow"></span>
        </div>
        
        <h1 class="font-pixel text-xl text-primary crt-glow mb-4">
          {% trans "Confirm Email Address" %}
        </h1>
        
        {% if confirmation %}
          {% user_display confirmation.email_address.user as user_display %}
          <p class="retro-text text-light/80 text-center max-w-xl mb-6">
            {% blocktrans with confirmation.email_address.email as email %}
            Please confirm that <span class="text-primary">{{ email }}</span> is the email address for user <span class="text-primary">{{ user_display }}</span>.
            {% endblocktrans %}
          </p>

          <form method="post" action="{% url 'account_confirm_email' confirmation.key %}" class="w-full">
            {% csrf_token %}
            <button type="submit" 
                    class="retro-btn w-full bg-primary text-dark border-primary hover:bg-secondary flex items-center justify-center gap-3">
              <span class="ph-bold ph-check-circle text-accent"></span>
              {% trans "Confirm Email" %}
            </button>
          </form>

        {% else %}
          {% url 'account_email' as email_url %}
          <div class="border-2 border-red-500/50 rounded p-4 bg-red-500/10 mb-6" role="alert">
            <p class="retro-text text-light/80 text-center">
              {% blocktrans %}
              This email confirmation link has expired or is invalid. 
              Please <a href="{{ email_url }}" class="text-accent hover:underline">request a new confirmation email</a>.
              {% endblocktrans %}
            </p>
          </div>
        {% endif %}
      </div>
      
      <div class="pixel-accent-amber mt-8 mb-4"></div>
    </div>
  </div>
</div>
{% endblock content %}
