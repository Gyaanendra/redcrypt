{% extends "socialaccount/base_entrance.html" %}
{% load i18n %}
{% load allauth %}
{% load static %}
{% block head_title %}
  Complete Signup
{% endblock head_title %}
{% block head %}
  <style>
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes wave {
  0% { transform: rotate(0deg); }
  20% { transform: rotate(-20deg); }
  40% { transform: rotate(10deg); }
  60% { transform: rotate(-10deg); }
  80% { transform: rotate(5deg); }
  100% { transform: rotate(0deg); }
}

.animate-fadeIn {
  animation: fadeIn 0.4s ease-out forwards;
  animation-delay: 0.1s;
  opacity: 0;
}

.animate-wave {
  animation: wave 2s ease-in-out infinite;
  transform-origin: 70% 70%;
}

/* Social signup specific styles */
.social-container {
  border: 3px solid #08b74f;
  border-radius: 4px;
  background: linear-gradient(180deg, #2d1d0e 0%, #251809 100%);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    0 4px 0 rgba(8, 183, 79, 0.3),
    0 8px 40px rgba(0, 0, 0, 0.4);
}

.social-input {
  border: 2px solid rgba(221, 207, 181, 0.2);
  border-radius: 4px;
  background: rgba(0, 0, 0, 0.3);
  color: #ddcfb5;
  font-family: 'VT323', monospace;
  font-size: 1.15rem;
  padding: 0.75rem;
  transition: all 0.2s ease;
}

.social-input:focus {
  outline: none;
  border-color: rgba(8, 183, 79, 0.6);
  box-shadow: 0 0 12px rgba(8, 183, 79, 0.25);
}

.social-input::placeholder {
  color: rgba(221, 207, 181, 0.4);
}

.social-input:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background: rgba(0, 0, 0, 0.5);
}
  </style>
{% endblock head %}
{% block content %}
  <div class="min-h-screen flex items-center justify-center px-4 py-8">
    <div class="w-full max-w-4xl">
      <div class="social-container overflow-hidden flex flex-col md:flex-row" data-aos="fade-up" data-aos-duration="800">
        <!-- Left side - branding -->
        <div class="md:w-2/5 relative overflow-hidden bg-dark hidden md:block">
          <div class="absolute inset-0 retro-dots opacity-30"></div>
          <div class="relative z-10 h-full flex flex-col justify-between p-8">
            <div class="flex justify-between items-start">
              <img src="{% static 'foss-bu-dark.png' %}"
                   alt="FOSS BU"
                   class="h-8 w-auto pixelated">
              <img src="{% static 'logo.svg' %}"
                   alt="Re-Dcrypt"
                   class="h-8 w-auto pixelated">
            </div>
            <div>
              <h2 class="font-pixel text-xl text-light crt-glow leading-relaxed">
                Let's Complete<br>Your Login
              </h2>
              <div class="pixel-accent mt-4"></div>
            </div>
          </div>
        </div>

        <!-- Right side - form -->
        <div class="md:w-3/5 p-8">
          <!-- Mobile header -->
          <div class="md:hidden mb-6 text-center">
            <div class="flex justify-center gap-4 mb-4">
              <img src="{% static 'foss-bu-dark.png' %}" alt="FOSS BU" class="h-8 w-auto pixelated">
              <img src="{% static 'logo.svg' %}" alt="Re-Dcrypt" class="h-8 w-auto pixelated">
            </div>
          </div>

          <form method="post" action="{% url 'socialaccount_signup' %}">
            {% csrf_token %}
            
            <div class="flex flex-col items-center mb-8">
              <div class="w-14 h-14 border-2 border-accent rounded bg-accent/10 flex items-center justify-center mb-4">
                <i class="ph-fill ph-hand-waving text-2xl text-accent animate-wave"></i>
              </div>
              <div class="text-center">
                <h2 class="font-pixel text-base text-primary crt-glow-sm">One Last Step!</h2>
                <p class="retro-text text-light/60 text-sm mt-2">Complete your profile to continue with {{ account.get_provider.name }}</p>
              </div>
            </div>

            <div class="space-y-4">
              <div>
                <label for="id_email" class="font-pixel text-xs text-light block mb-2">Email</label>
                <input type="email"
                       name="email"
                       value="{{ form.email.value|default:'' }}"
                       placeholder="Email address"
                       id="id_email"
                       readonly
                       class="social-input w-full cursor-not-allowed opacity-50">
              </div>

              <div>
                <label for="id_username" class="font-pixel text-xs text-light block mb-2">
                  <i class="ph-fill ph-user text-accent mr-2"></i>Username
                </label>
                <input type="text"
                       name="username"
                       placeholder="Choose a username"
                       id="id_username"
                       required
                       class="social-input w-full">
              </div>

              <div>
                <label for="id_name" class="font-pixel text-xs text-light block mb-2">
                  <i class="ph-fill ph-identification-card text-accent mr-2"></i>Full Name (Optional)
                </label>
                <input type="text"
                       name="name"
                       id="id_name"
                       placeholder="Your full name"
                       class="social-input w-full">
              </div>

              <div>
                <label for="id_organization" class="font-pixel text-xs text-light block mb-2">
                  <i class="ph-fill ph-buildings text-accent mr-2"></i>College/Organization (Optional)
                </label>
                <input type="text"
                       name="organization"
                       id="id_organization"
                       placeholder="Your organization"
                       class="social-input w-full">
              </div>
            </div>

            <div class="mt-6">
              <button type="submit"
                      class="retro-btn w-full bg-primary text-dark border-primary hover:bg-secondary flex items-center justify-center gap-3">
                <i class="ph-bold ph-check-circle text-accent"></i>
                <span>Complete Signup</span>
              </button>
            </div>
          </form>

          <div class="mt-6">
            <p class="retro-text text-light/40 text-xs text-center">
              By signing up, you agree to Re-Dcrypt's
              <a href="{% url 'terms_and_conditions' %}" class="text-accent hover:underline">Terms of Service</a> and
              <a href="{% url 'privacy_policy' %}" class="text-accent hover:underline">Privacy Policy</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% if form.errors %}
    <script>
  document.addEventListener('DOMContentLoaded', function() {
    {% for field in form %}
      {% for error in field.errors %}showToast("{{ error|escapejs }}", 3000, "ERROR");{% endfor %}
    {% endfor %}
  });
    </script>
  {% endif %}
{% endblock content %}
