{% extends "base.html" %}
{% load socialaccount %}
{% load profile_tags %}
{% get_providers as socialaccount_providers %}
{% get_social_accounts user as accounts %}
{% block head_title %}{{ usern.username }} Profile {% endblock head_title %}
{% block content %}
<div class="container mx-auto px-4 py-8">
  <div class="max-w-3xl mx-auto" data-aos="fade-up">
    <!-- Public Profile Card -->
    <div class="retro-card p-6 md:p-8">
      <div class="pixel-accent mb-6"></div>

      <!-- Avatar & Username -->
      <div class="flex flex-col items-center mb-8">
        <div class="pixel-border pixelated w-24 h-24 md:w-28 md:h-28 mb-4">
          <img src="{% avatar usern %}" alt="{{ usern.username }}" class="w-full h-full object-cover pixelated">
        </div>
        <h1 class="font-pixel text-xl md:text-2xl text-primary crt-glow mb-2">{{ usern.username }}</h1>
        {% if profile.is_banned %}
        <div class="inline-flex items-center gap-2 bg-dark px-4 py-2 pixel-border-amber mt-2">
          <i class="ph-fill ph-warning text-secondary"></i>
          <span class="font-pixel text-xs text-secondary">Banned</span>
        </div>
        {% endif %}
      </div>

      <div class="pixel-accent-amber mb-6"></div>

      <!-- Stats Grid -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
        <div class="retro-container p-4 text-center">
          <i class="ph-fill ph-medal-military text-3xl text-secondary mb-2 crt-glow-sm block"></i>
          <p class="font-pixel text-xs text-light/60 mb-1">Rank</p>
          <p class="text-xl font-bold text-light">{{ rank|safe }}</p>
        </div>

        <div class="retro-container p-4 text-center">
          <i class="ph-fill ph-chart-line-up text-3xl text-primary mb-2 crt-glow-sm block"></i>
          <p class="font-pixel text-xs text-light/60 mb-1">Score</p>
          <p class="text-xl font-bold text-light">{{ profile.score }}</p>
        </div>

        <div class="retro-container p-4 text-center">
          <i class="ph-fill ph-trend-up text-3xl text-secondary mb-2 crt-glow-sm block"></i>
          <p class="font-pixel text-xs text-light/60 mb-1">Level</p>
          <p class="text-xl font-bold text-light">{{ profile.current_level }}</p>
        </div>
      </div>

      <!-- Public Info (if available) -->
      {% if profile.is_public_name or profile.is_public_organization %}
      <div class="pixel-accent mb-4"></div>
      <h3 class="font-pixel text-sm text-primary crt-glow-sm mb-4 flex items-center gap-2">
        <i class="ph-fill ph-info"></i>
        Public Info
      </h3>
      <div class="retro-container p-4 space-y-3">
        {% if profile.is_public_name and profile.name %}
        <div class="flex items-center gap-2">
          <i class="ph-fill ph-user text-secondary"></i>
          <span class="retro-text text-light text-sm">{{ profile.name }}</span>
        </div>
        {% if profile.is_public_organization and profile.organization %}
        <div class="pixel-accent-amber"></div>
        {% endif %}
        {% endif %}

        {% if profile.is_public_organization and profile.organization %}
        <div class="flex items-center gap-2">
          <i class="ph-fill ph-graduation-cap text-secondary"></i>
          <span class="retro-text text-light text-sm">{{ profile.organization }}</span>
        </div>
        {% endif %}
      </div>
      {% endif %}

      <div class="pixel-accent-amber mt-6"></div>
    </div>
  </div>
</div>
{% endblock content %}
